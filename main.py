import asyncio
import time

from crawlers.douyin.web.web_crawler import DouyinWebCrawler
from crawlers.download import download_file
from crawlers.hybrid.hybrid_crawler import HybridCrawler


async def download():
    DouyinWebCrawler.GlobalCookies = "UIFID_TEMP=63bdc4b4b456901f349a081bfd3a24da10a1c6623f0a2d5eadd83f51c9f4d112f5f25345e0c18b1828d9fd35429a9eacd3a76f064a9d5feb6fd0a7304c7036ec90b0a5c4e125572c692a93ee278176921e9daa629c2e8d9a34a4308f7045482abbf6fc877343c1f306f45a214e059e9e; hevc_supported=true; fpk1=U2FsdGVkX1+1fUxC0Gprwl0NIBdtfwg+o0rROTyS3Pb6/ofaylewwDqeq2R8y9IRLZ558aHOQdrczgIrD0g48g==; fpk2=7675d59b5e84e0a878ee6f0a97f9056f; UIFID=63bdc4b4b456901f349a081bfd3a24da10a1c6623f0a2d5eadd83f51c9f4d112f5f25345e0c18b1828d9fd35429a9eacd3a76f064a9d5feb6fd0a7304c7036ec34b68fadfc9c03820e12003b17e5c9d80bb1e62c181ac72c60dd465ac998bd2f1b224a5b9de51392dd271984b238ffaed59c7cae4ee837a345b5ce51cb67d747c529ed4e27bbf77798ca58a904e6fb39035f42c8677b725a9d7c021bda0049756d569e723d5c8b97ab2c7509b7d8a60f3d364fc52f7a0e1550794545e232470d; __security_mc_1_s_sdk_crypt_sdk=5dd77ee6-4a19-804e; bd_ticket_guard_client_web_domain=2; passport_csrf_token=00a3837fd876f680b9435fbdaac17927; passport_csrf_token_default=00a3837fd876f680b9435fbdaac17927; d_ticket=58e427cba29e8a2675e18194aad1581f60d95; passport_mfa_token=CjXNrlL%2BBvtEEeNU2gq7nWLXpbdZTGvu4DY65iJYfHduNpdG1dVkeKorfC2OWBw%2B0e05myH%2B0xpKCjwAAAAAAAAAAAAAT0BCtIlO5B%2BEAAx0ldLnUIx4kh82uS9Fzx%2F00HzxZY%2FAMEtOfTvdZPVfZd9O%2B0VbAIoQp5T3DRj2sdFsIAIiAQMN1Xnn; passport_assist_user=CjxZCC9O6t3mWBZHu3a4jP0FzdD2kHWQhukQDGCctbvZ6jOD3JTNZYg96X3vHZQsboY4G1QfcS-0k3D1v_IaSgo8AAAAAAAAAAAAAE9AN6_0j2YSYs84YWczFW-UmOjcjDarvIhdFPUZgNrc9OXtGO1TeZpwKBRrTsRry9c8EKqU9w0Yia_WVCABIgEDnbG6Iw%3D%3D; n_mh=X52y9iTjnv0zd8J1MVnLTEXNetV1QKDf96k-2ZaOCF0; uid_tt=4097aa370be1b2e5d59814eb0ee479b9; uid_tt_ss=4097aa370be1b2e5d59814eb0ee479b9; sid_tt=33a1d69fbcdbd90859a66817597d38ff; sessionid=33a1d69fbcdbd90859a66817597d38ff; sessionid_ss=33a1d69fbcdbd90859a66817597d38ff; is_staff_user=false; _bd_ticket_crypt_doamin=2; _bd_ticket_crypt_cookie=e2e5ab87990fb222fe2b71235cb0e6bd; __security_mc_1_s_sdk_sign_data_key_web_protect=53fd1a05-4e65-97e0; __security_mc_1_s_sdk_cert_key=6f93c660-4066-a971; __security_server_data_status=1; enter_pc_once=1; s_v_web_id=verify_mdab1yt8_bZYDQBVx_roMF_4e6n_ALGG_hFOffdSNeEBI; SelfTabRedDotControl=%5B%5D; my_rd=2; dy_swidth=1920; dy_sheight=1080; strategyABtestKey=%221757826414.237%22; is_dash_user=1; volume_info=%7B%22isUserMute%22%3Afalse%2C%22isMute%22%3Atrue%2C%22volume%22%3A0.861%7D; sid_guard=33a1d69fbcdbd90859a66817597d38ff%7C1757826420%7C5184000%7CThu%2C+13-Nov-2025+05%3A07%3A00+GMT; sid_ucp_v1=1.0.0-KGMxYjQzZjBmNWNkNGMzMGVjM2Y5YjYxNjM3ZWVjYmI3NWIyYjdjMzUKHwjN9N6G4QIQ9JqZxgYY2hYgDDDEqf_UBTgCQPEHSAQaAmhsIiAzM2ExZDY5ZmJjZGJkOTA4NTlhNjY4MTc1OTdkMzhmZg; ssid_ucp_v1=1.0.0-KGMxYjQzZjBmNWNkNGMzMGVjM2Y5YjYxNjM3ZWVjYmI3NWIyYjdjMzUKHwjN9N6G4QIQ9JqZxgYY2hYgDDDEqf_UBTgCQPEHSAQaAmhsIiAzM2ExZDY5ZmJjZGJkOTA4NTlhNjY4MTc1OTdkMzhmZg; download_guide=%222%2F20250914%2F0%22; bd_ticket_guard_client_data_v2=eyJyZWVfcHVibGljX2tleSI6IkJQSndwTDRGN094L0dUUkgrUzN2UEF6QzBaMnA3Wk9OZVQvQUcrZ253NTBQUlVCQm9uSDNFc2VhSUIrVWwzSm1uV0Z0OEc3MERNSjFNR1F6UWtPcHpCcz0iLCJ0c19zaWduIjoidHMuMi42NzA3NWNlYmIwNDlkNjE3MmQ0ZTczYWUzOGUxMGYzNmVkMGE3Y2RkYTc0NmRlMWFkOTQ1ZmI1MWUzZjcwMjBjYzRmYmU4N2QyMzE5Y2YwNTMxODYyNGNlZGExNDkxMWNhNDA2ZGVkYmViZWRkYjJlMzBmY2U4ZDRmYTAyNTc1ZCIsInJlcV9jb250ZW50Ijoic2VjX3RzIiwicmVxX3NpZ24iOiJER1V0RklvV3NlZDd5djBiR2tMV3A2MENJc0hGdlRVbHdNYjdJU05xQ2tZPSIsInNlY190cyI6IiNNTk1OQ2IwU0U0c1BMeGh4dm13b0MzL3Q4dSt6OUhYSkdteDZDTktDeVorWVFsbStqQU4xZUp3ZkNLY1EifQ%3D%3D; __ac_nonce=068c6901300ae025af31b; __ac_signature=_02B4Z6wo00f01fScnoQAAIDBw7ha2RjlXqX0vJoAABXj32; FOLLOW_LIVE_POINT_INFO=%22MS4wLjABAAAA3BKauZ9ySqFsQzhwIlJVHMaOILMCNXB2ldj9Xxnf_xI%2F1757865600000%2F0%2F0%2F1757844076101%22; FOLLOW_NUMBER_YELLOW_POINT_INFO=%22MS4wLjABAAAA3BKauZ9ySqFsQzhwIlJVHMaOILMCNXB2ldj9Xxnf_xI%2F1757865600000%2F0%2F0%2F1757844676102%22; __live_version__=%221.1.3.9904%22; webcast_local_quality=null; live_can_add_dy_2_desktop=%220%22; live_use_vvc=%22false%22; stream_recommend_feed_params=%22%7B%5C%22cookie_enabled%5C%22%3Atrue%2C%5C%22screen_width%5C%22%3A1920%2C%5C%22screen_height%5C%22%3A1080%2C%5C%22browser_online%5C%22%3Atrue%2C%5C%22cpu_core_num%5C%22%3A20%2C%5C%22device_memory%5C%22%3A8%2C%5C%22downlink%5C%22%3A10%2C%5C%22effective_type%5C%22%3A%5C%224g%5C%22%2C%5C%22round_trip_time%5C%22%3A50%7D%22; IsDouyinActive=true; bd_ticket_guard_client_data=eyJiZC10aWNrZXQtZ3VhcmQtdmVyc2lvbiI6MiwiYmQtdGlja2V0LWd1YXJkLWl0ZXJhdGlvbi12ZXJzaW9uIjoxLCJiZC10aWNrZXQtZ3VhcmQtcmVlLXB1YmxpYy1rZXkiOiJCUEp3cEw0RjdPeC9HVFJIK1MzdlBBekMwWjJwN1pPTmVUL0FHK2dudzUwUFJVQkJvbkgzRXNlYUlCK1VsM0ptbldGdDhHNzBETUoxTUdRelFrT3B6QnM9IiwiYmQtdGlja2V0LWd1YXJkLXdlYi12ZXJzaW9uIjoyfQ%3D%3D; publish_badge_show_info=%220%2C0%2C0%2C1757843512402%22; home_can_add_dy_2_desktop=%221%22; odin_tt=0edce1c8567c686f9aa04ab4b1459966d27deb2b84f1373ab169bc701a5fe76f92ce1b491fbc5f830777460c827c67c36aa012b1356d68bf6cde85fc8489186b26a1e57c6bde130102ef6e500de4ec49; ttwid=1%7Czxwv0RdVXaKnGDRKURm81C_p3ivvcnVSFegYXlJHNQ8%7C1757843518%7C95ac01b82b29f1dff0855239a15ebfd842694918040de78ea647146b56fd1935; biz_trace_id=81744f19; sdk_source_info=7e276470716a68645a606960273f276364697660272927676c715a6d6069756077273f276364697660272927666d776a68605a607d71606b766c6a6b5a7666776c7571273f275e58272927666a6b766a69605a696c6061273f27636469766027292762696a6764695a7364776c6467696076273f275e582729277672715a646971273f2763646976602729277f6b5a666475273f2763646976602729276d6a6e5a6b6a716c273f2763646976602729276c6b6f5a7f6367273f27636469766027292771273f273d323032343036313d32303234272927676c715a75776a716a666a69273f2763646976602778; bit_env=TXXire9qPn0wtVpPN3hHQmpBFWGYD1GHf-akfLHB3W7Sxs2BJKhdeDNFiZAIq2CpEbdAld5FG64p5aQ3w8Jao5Vq2zgXNE2i7hsh3gMNN7xpHJVK-j53SW46xVjg89AEU2AKJ8Nygd2YZrE8DdCRHPcBJf4aYLbL6RT0ilqolh1FWscOt_2QxdtxAw4O_A4guHQKrJm1ZV5KSHRTfw_RIaY2dsu_1b9IzTo_hxRM8V-lfIKAGZv1sNxofOW67SN3pUGLWlzc9hgB6J-qWG7YUuWD2QscfGKQxI_2AU96L5-HrqITa0NUHHvc3sg5S4F6NA67XOd4pN3G76PwRceLzwOUOJ1-XrspgoQwO6t8Xrg8Yunlai9EH1y2OalawBWGC0F-DRdzYfYo5TETbaGthwFQrPRqwJQBTZbhHtHr3sv0_Y5seeAgxfYxaDf9aNMGTezDP9iQWmz9QzILhduN1h1YLry2x1qdNJnpMgzL8pEC9Q4-DtYy0RbFwYF-uS1S; gulu_source_res=eyJwX2luIjoiZDg4YmU1YzYyOTY3MTM3ZmE5OWY4N2MxMzRlYmZlNmU2YWY4YWQzNWI0MzQ5OGVhNTYzOThiMDAxNjYwODYxYyJ9; passport_auth_mix_state=n5qrbjxvzuyrdrc2wc9kfxqaptp0ly8e; session_tlb_tag=sttt%7C9%7CM6HWn7zb2QhZpmgXWX04__________-6rDRO5N_opc0YehxFzMP5c-UcMQVk11RjakvT02aluSk%3D"
    url = "https://v.douyin.com/L4FJNR3/"
    url = "https://v.douyin.com/idLUJW0sPG8/"
    data = await download_file("./", "牙刷", url=url)
    return data


async def req():
    url = "https://v.douyin.com/L4FJNR3/"
    url = "https://v.douyin.com/idLUJW0sPG8/"
    data = await HybridCrawler().hybrid_parsing_single_video(url=url, minimal=False)
    return data





if __name__ == '__main__':
    # result = asyncio.run(req())
    # print(result)
    result = asyncio.run(download())
    print(result)

